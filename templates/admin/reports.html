<!-- templates/admin/reports.html -->
{% extends "base.html" %}

{% block title %}Reports - AyudaBesh{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1>Reports</h1>
        <button onclick="window.location.href='/admin/dashboard'" 
                style="background: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 4px;">
            ← Back to Dashboard
        </button>
    </div>

    <!-- Report Filters -->
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
        <h3>Generate Report</h3>
        <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 15px;">
            <select id="reportType" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="daily">Daily Bookings</option>
                <option value="provider">Provider Activity</option>
                <option value="customer">Customer History</option>
                <option value="earnings">Provider Earnings</option>
            </select>
            <input type="date" id="reportDate" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;" value="2025-11-27">
            <button onclick="generateReport()" style="background: #0070f3; color: white; padding: 8px 16px; border: none; border-radius: 4px;">
                Generate Report
            </button>
            <button onclick="exportReport()" style="background: #28a745; color: white; padding: 8px 16px; border: none; border-radius: 4px;">
                Export CSV
            </button>
        </div>
    </div>

    <!-- Report Results -->
    <div id="reportResults" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3>Daily Bookings Report - November 27, 2025</h3>
        <div style="overflow-x: auto; margin-top: 15px;">
            <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Booking ID</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Customer</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Provider</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Service Type</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Time</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Status</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Payment</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;">BK789</td>
                        <td style="padding: 12px;">Maria Santos</td>
                        <td style="padding: 12px;">John Dela Cruz</td>
                        <td style="padding: 12px;">Plumbing</td>
                        <td style="padding: 12px;">Nov 27, 2:00 PM</td>
                        <td style="padding: 12px;">
                            <span style="background: #ffc107; color: #333; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                Pending
                            </span>
                        </td>
                        <td style="padding: 12px;">₱500</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;">BK788</td>
                        <td style="padding: 12px;">Carlos Reyes</td>
                        <td style="padding: 12px;">Anna Lim</td>
                        <td style="padding: 12px;">Domestic Cleaning</td>
                        <td style="padding: 12px;">Nov 27, 10:00 AM</td>
                        <td style="padding: 12px;">
                            <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                Completed
                            </span>
                        </td>
                        <td style="padding: 12px;">₱450</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;">BK787</td>
                        <td style="padding: 12px;">Luis Garcia</td>
                        <td style="padding: 12px;">Elena Torres</td>
                        <td style="padding: 12px;">Electrical Work</td>
                        <td style="padding: 12px;">Nov 27, 3:30 PM</td>
                        <td style="padding: 12px;">
                            <span style="background: #17a2b8; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                Accepted
                            </span>
                        </td>
                        <td style="padding: 12px;">₱600</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Report Summary -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
        <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0 0 10px 0; color: #0070f3;">3</h3>
            <p>Total Bookings</p>
        </div>
        <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0 0 10px 0; color: #28a745;">₱1,550</h3>
            <p>Total Revenue</p>
        </div>
        <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0 0 10px 0; color: #17a2b8;">2</h3>
            <p>Active Providers</p>
        </div>
        <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <h3 style="margin: 0 0 10px 0; color: #ffc107;">1</h3>
            <p>Pending Bookings</p>
        </div>
    </div>
</div>

<script>
function generateReport() {
    const reportType = document.getElementById('reportType').value;
    const reportDate = document.getElementById('reportDate').value;
    
    let reportTitle = '';
    switch(reportType) {
        case 'daily':
            reportTitle = 'Daily Bookings Report';
            break;
        case 'provider':
            reportTitle = 'Provider Activity Report';
            break;
        case 'customer':
            reportTitle = 'Customer History Report';
            break;
        case 'earnings':
            reportTitle = 'Provider Earnings Report';
            break;
    }
    
    document.querySelector('#reportResults h3').textContent = 
        `${reportTitle} - ${formatDate(reportDate)}`;
    
    // In a real app, you'd fetch data from your API
    alert(`Generating ${reportTitle} for ${formatDate(reportDate)}`);
}

function exportReport() {
    alert('Report exported successfully as CSV!');
}

function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
}

// Initialize with today's date
document.addEventListener('DOMContentLoaded', () => {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('reportDate').value = today;
});
</script>
{% endblock %}